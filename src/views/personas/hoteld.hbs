<main>
    <section id="hero" class="mb-5">
        <div id="carouselExampleSlidesOnly" class="carousel slide"
            data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="/img/BannerHotel.jpg" class="d-block w-100"
                        alt="...">
                </div>
            </div>
        </div>
    </section>
    <hr>
    <div class="container">
        <div class="row mb-3">
            <div class="col-md-10 offset-md-1 hotel-info">
                <h5 style="color:#2C3E50;"><strong>Hotel Lleras</strong></h5>
                <ul class="p-0">
                    <li>Calle 88 #25 -14</li>
                    <li>4.5(50 Reseñas)</li>
                </ul>
                <div class="d-flex justify-content-center mt-3">
                    <button type="submit"
                        style="color: #EAEAEA; background-color:#9B59B6;"
                        class="btn">Reservar</button>
                </div>
            </div>
        </div>
        <div class="card text-center">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="true" href="#"
                            data-content="info">Descripción</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"
                            data-content="services">Habitaciones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"
                            data-content="location">Actividades</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"
                            data-content="reviews">Reseñas</a>
                    </li>
                </ul>
            </div>

            <div class="card-body">
                <!-- Descripción del Hotel -->
                <div id="infoContent">
                    <h5 class="card-title">Descripción del Hotel</h5>
                    <p class="card-text">Todas las habitaciones de este
                        alojamiento están equipadas con TV de pantalla plana con
                        canales por cable y caja fuerte. En el hotel, las
                        habitaciones incluyen ropa de cama y toallas. En Hotel
                        Lleras 10 se puede disfrutar de un desayuno americano.
                        La recepción ofrece consejos las 24 horas, y el personal
                        habla inglés y español. Plaza de Toros La Macarena está
                        a 7 km del alojamiento, y Parque Explora está a 9 km. El
                        aeropuerto (Aeropuerto Olaya Herrera) está a 3 km.</p>
                </div>

                <!-- Habitaciones del Hotel -->
                <div id="servicesContent" style="display: none;">
                    <h5 class="card-title">Habitaciones del Hotel</h5>
                    <div class="container">
                        <div class="row mb-5">
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <img src="/img/Hotel1.jpeg"
                                        class="card-img-top"
                                        alt="Hotel Feature 1">
                                    <div class="card-body">
                                        <h5 class="card-title">Feature 1</h5>
                                        <p class="card-text">Descripción de la
                                            primera característica del
                                            hotel.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <img src="/img/Hotel2.jpeg"
                                        class="card-img-top"
                                        alt="Hotel Feature 2">
                                    <div class="card-body">
                                        <h5 class="card-title">Feature 2</h5>
                                        <p class="card-text">Descripción de la
                                            segunda característica del
                                            hotel.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <img src="/img/Hotel3.jpeg"
                                        class="card-img-top"
                                        alt="Hotel Feature 3">
                                    <div class="card-body">
                                        <h5 class="card-title">Feature 3</h5>
                                        <p class="card-text">Descripción de la
                                            tercera característica del
                                            hotel.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Actividades del Hotel -->
                <div id="locationContent" style="display: none;">
                    <h5 class="card-title">Actividades del Hotel</h5>
                    <div class="container">
                        <div class="row mb-5">
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <img src="/img/Hotel1.jpeg"
                                        class="card-img-top"
                                        alt="Hotel Activity 1">
                                    <div class="card-body">
                                        <h5 class="card-title">Actividad 1</h5>
                                        <p class="card-text">Descripción de la
                                            primera actividad del hotel.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <img src="/img/Hotel2.jpeg"
                                        class="card-img-top"
                                        alt="Hotel Activity 2">
                                    <div class="card-body">
                                        <h5 class="card-title">Actividad 2</h5>
                                        <p class="card-text">Descripción de la
                                            segunda actividad del hotel.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <img src="/img/Hotel3.jpeg"
                                        class="card-img-top"
                                        alt="Hotel Activity 3">
                                    <div class="card-body">
                                        <h5 class="card-title">Actividad 3</h5>
                                        <p class="card-text">Descripción de la
                                            tercera actividad del hotel.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reseñas -->
                <div id="reviewsContent" style="display: none;">
                    <h5 class="card-title">Reseñas de Clientes</h5>
                    <div class="container">
                        <div class="row mb-5">
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">Cliente 1</h5>
                                        <p
                                            class="card-text">"Reseña de ejemplo de un cliente satisfecho. Servicio excelente."</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">Cliente 2</h5>
                                        <p
                                            class="card-text">"El lugar es increíble. Me encantó la atención y las instalaciones."</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">Cliente 3</h5>
                                        <p
                                            class="card-text">"Buena experiencia, pero podrían mejorar el servicio de habitaciones."</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <!-- Recomendaciones -->
        <div class="container">
            <div class="row mb-5">
                <h5 style="color:#2C3E50;"><strong>Recomendaciones</strong></h5>
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <img src="/img/Hotel1.jpeg" class="card-img-top"
                            alt="Recomendación 1">
                        <div class="card-body">
                            <h5 class="card-title">Recomendación 1</h5>
                            <p class="card-text">Descripción de la primera
                                recomendación del hotel.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <img src="/img/Hotel2.jpeg" class="card-img-top"
                            alt="Recomendación 2">
                        <div class="card-body">
                            <h5 class="card-title">Recomendación 2</h5>
                            <p class="card-text">Descripción de la segunda
                                recomendación del hotel.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <img src="/img/Hotel3.jpeg" class="card-img-top"
                            alt="Recomendación 3">
                        <div class="card-body">
                            <h5 class="card-title">Recomendación 3</h5>
                            <p class="card-text">Descripción de la tercera
                                recomendación del hotel.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

<style>
        #hero {
            height: 60vh;
            overflow: hidden;
        }
        #hero .carousel-item img {
            object-fit: cover;
            object-position: center;
            height: 60vh;
            width: 100%;
        }
        .card-img-top {
            height: 200px;
            object-fit: cover;
        }
        hr {
            border: 5px solid #EAEAEA; 
        }
        .mb-3 {
            margin-bottom: 1rem; 
        }
        .hotel-info {
            color: #FFFFFF;
            padding: 15px;
            border-radius: 5px;
        }
        .hotel-info h5 {
            color: #FFFFFF;
        }
        .hotel-info li {
            list-style-type: none;
        }
        .nav-tabs .nav-link.active {
        background-color: #9B59B6;
        color: white;
        }

        .nav-tabs .nav-link {
        color: #9B59B6;
        }

        .card {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border: none;
        border-radius: 8px;
        }

        .card-title {
        color: #2C3E50;
        }


        .card-img-top {
        object-fit: cover;
        height: 200px;
        }


        .container .row h5 {
        margin-bottom: 20px;
        }


        .mb-4 {
        margin-bottom: 30px;
        }
</style>

<script>
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.nav-link');
            tabs.forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    const content = this.getAttribute('data-content');
                    document.querySelectorAll('.card-body > div').forEach(div => div.style.display = 'none');
                    document.getElementById(content + 'Content').style.display = 'block';
                });
            });
        });
        $(document).ready(function() {
            const urlParams = new URLSearchParams(window.location.search);
            const hotelId = urlParams.get('id');

            if (hotelId) {
                $.get('/hotel-details', { id: hotelId }, function(hotel) {
                    if (hotel) {
                        // Rellenar los detalles del hotel en la página
                        $('#hotelName').text(hotel.name);
                        $('#hotelAddress').text(hotel.address);
                        $('#hotelPrice').text(hotel.price);
                        $('#hotelCategory').text(hotel.category);
                        $('#hotelAccommodationType').text(hotel.accommodation_type);
                        $('#hotelDescription').text(hotel.description);
                    } else {
                        // Mostrar mensaje si no se encuentra el hotel
                        $('#hotelDetails').html('<p>No se encontraron detalles para este hotel.</p>');
                    }
                });
            }
        });
</script>


{{!-- 
<main class="container">
  <div class="row">
    <!-- Sidebar: Filtro -->
    <div class="col-md-3">
      <div class="filtro-sidebar">
        <h3>Filtro</h3>
        <form action="/personas/filtro" method="GET">
          <div class="filtro-seccion">
            <h4>Rango de Precio</h4>
            <input type="number" name="precio_min" class="form-control" placeholder="Precio mínimo">
            <input type="number" name="precio_max" class="form-control" placeholder="Precio máximo">
          </div>
          <div class="filtro-seccion">
            <h4>Rango de Estrellas</h4>
            <ul>
              <li><input type="checkbox" name="estrellas" value="1"> 1 Estrella</li>
              <li><input type="checkbox" name="estrellas" value="2"> 2 Estrellas</li>
              <li><input type="checkbox" name="estrellas" value="3"> 3 Estrellas</li>
              <li><input type="checkbox" name="estrellas" value="4"> 4 Estrellas</li>
              <li><input type="checkbox" name="estrellas" value="5"> 5 Estrellas</li>
            </ul>
          </div>
          <div class="filtro-seccion">
            <h4>Actividades</h4>
            <ul>
              <li><input type="checkbox" name="actividades" value="1"> Actividad 1</li>
              <li><input type="checkbox" name="actividades" value="2"> Actividad 2</li>
              <li><input type="checkbox" name="actividades" value="3"> Actividad 3</li>
            </ul>
          </div>
          <div class="filtro-seccion">
            <h4>Orientación Sexual</h4>
            <ul>
              <li><input type="checkbox" name="orientacion" value="1"> Orientación 1</li>
              <li><input type="checkbox" name="orientacion" value="2"> Orientación 2</li>
              <li><input type="checkbox" name="orientacion" value="3"> Orientación 3</li>
            </ul>
          </div>
          <div class="filtro-seccion">
            <h4>Tipo de Alojamiento</h4>
            <input type="text" name="tipo_alojamiento" class="form-control" placeholder="All">
          </div>
          <button type="submit" class="btn btn-primary mt-3">Filtrar</button>
        </form>
      </div>
    </div>

    <!-- Main Content: Resultado -->
    <div class="col-md-9">
      <div class="search-bar">
        <label for="search">Filtro:</label>
        <input type="text" id="search" class="form-control" placeholder="Buscar...">
      </div>
      <div class="resultados">
        <!-- Aquí se mostrarán los resultados -->
        {{#if hoteles}}
        {{#each hoteles}}
        <div class="hotel-card">
          <img src="{{this.photo_url}}" alt="Hotel Image">
          <div class="hotel-info">
            <h5>{{this.name}}</h5>
            <p>{{this.address}}</p>
            <p>{{this.category}} estrellas</p>
            <p>Precio: ${{this.price}}</p>
          </div>
        </div>
        {{/each}}
        {{else}}
        <p>No se encontraron resultados</p>
        {{/if}}
      </div>
    </div>
  </div>
</main>
const express = require('express');
const router = express.Router();
const pool = require('../database'); // Asegúrate de que esto apunte a tu conexión a la base de datos

router.get('/filtro', async (req, res) => {
    try {
        const { precio_min, precio_max, estrellas, actividades, orientacion, tipo_alojamiento } = req.query;

        let query = `
            SELECT hotels.name, hotels.address, hotels.price, hotels.category, hotels.accommodation_type, hotel_photos.photo_url
            FROM hotels
            LEFT JOIN hotel_photos ON hotels.id = hotel_photos.hotel_id
            WHERE 1=1
        `;

        let queryParams = [];

        // Filtro por rango de precios
        if (precio_min) {
            query += ' AND hotels.price >= ?';
            queryParams.push(precio_min);
        }
        if (precio_max) {
            query += ' AND hotels.price <= ?';
            queryParams.push(precio_max);
        }

        // Filtro por estrellas
        if (estrellas) {
            const estrellasArray = Array.isArray(estrellas) ? estrellas : [estrellas];
            query += ' AND hotels.category IN (?)';
            queryParams.push(estrellasArray);
        }

        // Filtro por actividades (ajusta según tu base de datos)
        if (actividades) {
            const actividadesArray = Array.isArray(actividades) ? actividades : [actividades];
            query += ' AND EXISTS (SELECT 1 FROM hotel_activities WHERE hotel_activities.hotel_id = hotels.id AND hotel_activities.activity_id IN (?))';
            queryParams.push(actividadesArray);
        }

        // Filtro por orientación sexual (ajusta según tu base de datos)
        if (orientacion) {
            const orientacionArray = Array.isArray(orientacion) ? orientacion : [orientacion];
            query += ' AND EXISTS (SELECT 1 FROM user_orientations WHERE user_orientations.hotel_id = hotels.id AND user_orientations.orientation_id IN (?))';
            queryParams.push(orientacionArray);
        }

        // Filtro por tipo de alojamiento
        if (tipo_alojamiento) {
            query += ' AND hotels.accommodation_type LIKE ?';
            queryParams.push(`%${tipo_alojamiento}%`);
        }

        const [results] = await pool.query(query, queryParams);

        res.render('personas/filtro', { hoteles: results });
    } catch (err) {
        console.error('Error en el filtro: ', err);
        res.status(500).json({ message: 'Error en el servidor' });
    }
});

module.exports = router;

 --}}